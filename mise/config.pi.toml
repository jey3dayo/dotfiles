# ========================================
# グローバル mise 設定（ツール・共通設定のみ）
# ~/.config/mise/config.toml
# ========================================

[settings]
env_file = '.env.local'
experimental = true
jobs = 2                                                            # Raspberry Pi メモリ制約対応: 並列数削減でスワップ回避
vfox = false
idiomatic_version_file_enable_tools = []
trusted_config_paths = ["~/src/github.com", "/private/var/folders"]

[settings.pipx]
uvx = true

[env]
_.source = [".venv/bin/activate"]
YAMLLINT_CONFIG_FILE = "yamllint/config"
MD_GLOB = "**/*.md"
MD_EXCLUDES = "#node_modules #tmux/plugins #fisher #zsh/.zinit"

# ========================================
# オプション環境変数（ファイル限定処理）
# ========================================
# フォーマット/lint タスクで特定ファイルのみ処理する場合に設定
# 例: SH_FILES="script1.sh script2.sh" mise run format:shell
#
# SH_FILES = ""      # シェルスクリプト
# PY_FILES = ""      # Python ファイル
# LUA_FILES = ""     # Lua ファイル
# TOML_FILES = ""    # TOML ファイル
# BIOME_FILES = ""   # JS/TS/JSON ファイル (biome)
# PRETTIER_FILES = "" # Prettier 対象ファイル
# YAML_FILES = ""    # YAML ファイル

# ========================================
# ツール定義 (Tools)
# ========================================
# mise で管理する全ツールを定義

[tools]
# ========================================
# Language Runtimes (言語ランタイム - 開発用)
# ========================================
# 注: システム依存関係用の Node.js/Python は Homebrew で管理
node = "24"
python = "3.14"
# FIXME: Temporarily disabled due to luarocks 3.13.0 rockspec parsing issues in CI
# lua = "5.1.5"
# luajit = "latest"

# ========================================
# Package Managers (パッケージマネージャー)
# ========================================
"pipx:uv" = "latest"
bun = "latest"

# FIXME: Temporarily disabled due to CI failures - revisit when stable
# "pipx:git+https://github.com/agentskills/agentskills.git" = "main#subdirectory=skills-ref"

# ========================================
# Formatters and Linters (フォーマッター・Linter)
# ========================================
actionlint = "latest"
biome = "latest"
prettier = "latest"
# 注: hadolint は macOS/Linux x86_64 のみ (プラットフォーム固有セクション参照)
shellcheck = "latest"
shfmt = "latest"
stylua = "latest"
taplo = "latest"
yamllint = "latest"

# ========================================
# NPM Global Packages (Node.js グローバルパッケージ)
# ========================================

# ユーティリティ・ツール
"npm:@antfu/ni" = "latest"
"npm:npm" = "latest"
"npm:npm-check-updates" = "latest"

# AI・コミット支援
"npm:@openai/codex" = "latest"
"npm:aicommits" = "latest"

# ドキュメント・Lint
"npm:markdown-link-check" = "latest"
"npm:markdownlint-cli2" = "latest"
"npm:textlint" = "latest"
"npm:textlint-rule-preset-ja-technical-writing" = "latest"

# 環境変数管理
"npm:@dotenvx/dotenvx" = "latest"

# 注: Language Servers は除外 (リモート開発でローカルマシンのLSP使用)

# ユーティリティ
"npm:zx" = "latest"

# MCP サーバー (Model Context Protocol)
# 注: 軽量かつサーバー環境で有用なMCPのみ維持
"npm:@upstash/context7-mcp" = "latest"
"npm:o3-search-mcp" = "latest"

# Claude/AI ツール
# 注: デスクトップ開発ツール (dxt, dev3000, ccusage) は除外
"npm:@sasazame/ccresume" = "latest"

# 注: クラウド・インフラツールは除外 (aws-cli で十分)

# ========================================
# CLI Tools (コマンドラインユーティリティ)
# ========================================
# 注: Cargo系ツールは除外（ARM互換性考慮）
# 注: opencode は除外（x86_64のみサポート）
eza = "latest"
fd = "latest"
"github:cli/cli" = "latest"
jq = "latest"
yazi = "latest"

# ========================================
# タスク設定 (Task Configuration)
# ========================================
# タスク定義は mise/tasks/ ディレクトリに分割されています。
# .mise.toml の [task_config] セクションで読み込まれます。
