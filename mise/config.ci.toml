# ========================================
# CI-Optimized mise Configuration
# ~/.config/mise/config.ci.toml
# ========================================
# GitHub Actions CI 専用設定（最小ツールセット）
#
# 最適化:
# - config.default.toml: 全ツール（開発環境用）
# - config.pi.toml: サーバー向け最小セット
# - config.ci.toml: CI必須ツールのみ（最小構成）
# ========================================

[settings]
env_file = '.env.local'
experimental = true
jobs = 4                                                                         # GitHub Actions runners: 2 cores
vfox = false
idiomatic_version_file_enable_tools = []
trusted_config_paths = ["~/.config", "~/src/github.com", "/private/var/folders"]

[settings.pipx]
uvx = true

# ========================================
# 環境変数（CI でもローカルと同じ対象範囲を使用）
# ========================================

[env]
YAMLLINT_CONFIG_FILE = "yamllint/config"
MD_GLOB = "**/*.md"
MD_EXCLUDES = "#node_modules #tmux/plugins #fisher #zsh/.zinit #agents/external #.worktrees #result #result-* #.kiro"
TASK_EXCLUDES = "--exclude agents/external --exclude .worktrees --exclude result --exclude result-* --exclude .luarocks --exclude .kiro"

# ========================================
# ツール定義 - CI必須ツールのみ
# ========================================

[tools]
# Package Managers
"pipx:uv" = "latest" # uvx for ruff execution
# Runtime
node = "lts"
# Formatters and Linters
biome = "latest"           # JS/TS/JSON
prettier = "latest"        # General
shellcheck = "latest"      # Shell lint
shfmt = "latest"           # Shell format
stylua = "latest"          # Lua format
taplo = "latest"           # TOML format
yamllint = "latest"        # YAML lint
"pipx:beautysh" = "latest" # Shell format (Python-based)
# NPM Packages
"npm:markdown-link-check" = "latest"
"npm:markdownlint-cli2" = "latest"
"npm:tsx" = "latest"
# CLI Tools
fd = "latest" # File discovery
