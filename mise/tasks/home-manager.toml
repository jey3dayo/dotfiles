# ========================================
# Home Manager ç®¡ç†
# ========================================

["hm:switch"]
description = "Home Manager ã‚’é©ç”¨ï¼ˆdotfilesé…å¸ƒï¼‰"
run = "home-manager switch --flake . --impure"

["hm:check"]
description = "Home Manager è¨­å®šã®æ¤œè¨¼ï¼ˆãƒ“ãƒ«ãƒ‰ã®ã¿ã€é©ç”¨ãªã—ï¼‰"
run = "home-manager build --flake . --impure"

["hm:generations"]
description = "Home Manager ã®ä¸–ä»£ä¸€è¦§ã‚’è¡¨ç¤º"
run = "home-manager generations"

["hm:news"]
description = "Home Manager ã® news ã‚’è¡¨ç¤ºï¼ˆflakeç”¨ï¼‰"
run = "home-manager news --flake . --impure"

["hm:rollback"]
description = "Home Manager ã‚’å‰ã®ä¸–ä»£ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯"
run = """
  # List generations and select the previous one
  prev_gen=$(home-manager generations | head -2 | tail -1 | awk '{print $NF}')
  if [ -z "$prev_gen" ]; then
    echo "âŒ No previous generation found"
    exit 1
  fi
  echo "ğŸ“¦ Rolling back to generation: $prev_gen"
  home-manager switch --flake . --impure --switch-generation "$prev_gen"
"""

["hm:clean"]
description = "å¤ã„ Home Manager ä¸–ä»£ã‚’å‰Šé™¤ï¼ˆ30æ—¥ä»¥ä¸Šå‰ï¼‰"
run = "home-manager expire-generations '-30 days'"
