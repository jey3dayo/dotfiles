---
description: Unified task management and execution system
argument-hint: [add [description]] [--list] [--priority=<level>] [--suggest] [--global] [--sync]
---

# Todos - 統合タスク管理・実行システム

## 概要

プロジェクト内のタスクを統合管理し、追加・表示・実行の完全なワークフローを提供。TodoWriteツールと`.claude/TODO.md`ファイルを統合し、永続的なタスク管理を実現。

## 使用方法

```bash
# Todo表示・実行
/todos                    # インタラクティブモード（番号選択→実行）
/todos --list             # タスク一覧のみ表示
/todos --priority=high    # 特定優先度のみ表示
/todos --suggest          # 実行順序の提案表示

# Todo追加
/todos add                # 新規Todo追加（対話型）
/todos add "タスク概要"    # 直接Todo追加
/todos add --auto         # AI候補から自動追加
/todos add --analyze      # 影響分析のみ実行

# プロジェクト管理
/todos --global           # 全プロジェクトのTodo横断表示
/todos --sync             # TodoWriteと.claude/TODO.mdを同期
```

## インタラクティブモード

### 基本フロー

1. **タスク一覧表示** - 番号付きでタスクを表示
2. **番号選択** - 実行したいタスクの番号を入力
3. **確認プロンプト** - 実行内容の確認
4. **自動実行** - 選択タスクを自動実行
5. **結果更新** - TodoWriteで進捗状況を自動更新

### 選択オプション

- `1-3,5`: 複数タスクを番号指定
- `all high`: 特定優先度の全タスクを実行
- `auto`: 推奨タスクを自動選択・実行
- `skip`: 選択をスキップ

## 主要機能

### 1. インタラクティブ実行機能

- **番号選択実行**: 番号入力でタスク直接実行
- **複数タスク実行**: 範囲指定・優先度一括実行
- **実行前確認**: 影響範囲・所要時間の事前表示
- **リアルタイム進捗**: 実行状況のライブ表示
- **自動状態更新**: TodoWrite連携で進捗自動反映

### 2. タスク統合管理

- **データソース統合**: `.claude/TODO.md`・TodoWrite・CLAUDE.mdの一元管理
- **永続化管理**: `.claude/TODO.md`ファイルでの長期タスク保存
- **関連タスク検出**: 同種作業の自動グルーピング
- **依存関係分析**: タスク間の依存関係を特定
- **実行順序提案**: 効率的な実行順序を提案

### 3. 優先度システム（5段階）

- **P1 (🟢)**: 即座実行（1-2時間・簡単・安全）
- **P2 (🟡)**: 標準実行（半日・中程度・検証必要）
- **P3 (🟠)**: 慎重実行（1-2日・複雑・テスト必要）
- **P4 (🟦)**: 統合実行（依存関係考慮・統合テスト）
- **P5 (🔴)**: 計画実行（設計検討・高リスク・大規模）

### 4. 実行サポート

- **並列実行提案**: 同時実行可能なタスクを特定
- **ボトルネック検出**: 進行を妨げる要因を発見
- **進捗追跡**: タスクの完了状況を管理
- **エラーハンドリング**: 実行失敗時の自動復旧・リトライ

### 5. Todo追加機能（統合）

- **AI駆動分析**: タスク説明から要件・影響範囲を自動抽出
- **自動優先度評価**: ビジネス価値×技術的複雑度×緊急度から算出
- **依存関係検出**: 既存タスクとの関連性・前提条件を特定
- **工数推定**: 過去の類似タスクから精密予測（±20%精度）
- **候補提案**: 完了タスクパターンから次期タスクを自動提案

## インタラクティブ実行フロー

### Phase 1: タスク表示・選択

1. **統合データ読み込み**: `.claude/TODO.md`・TodoWrite・手動Todoの統合
2. **番号付き一覧表示**: 優先度・影響度・推定時間付きで表示
3. **ユーザー選択受付**: 番号・範囲・優先度による選択
4. **実行前確認**: 影響範囲・依存関係・所要時間の確認
5. **実行承認**: ユーザー確認後の実行開始

### Phase 2: 自動タスク実行

1. **依存関係チェック**: 前提条件・ブロッカーの確認
2. **実行順序決定**: 効率的な実行順序の自動調整
3. **段階的実行**: 選択タスクの順次・並列実行
4. **リアルタイム進捗**: 実行状況の逐次表示
5. **エラーハンドリング**: 失敗時の自動復旧・スキップ判定

### Phase 3: 結果管理・更新

1. **実行結果記録**: 成功・失敗・部分完了の記録
2. **TodoWrite更新**: 進捗状況の自動反映
3. **影響分析**: 他タスクへの影響・新規依存関係
4. **次回推奨**: 次に実行すべきタスクの提案
5. **学習データ蓄積**: 実行パターン・効率性の記録

## 実行パターン例

### インタラクティブ選択例

```
📋 現在のタスク一覧:

🟢 P1 (即座実行):
  1. ESLintルール修正 (15分) [No dependencies]
  2. 型定義追加 (30分) [Task 1 完了後]

🟡 P2 (標準実行):
  3. React Component実装 (2時間) [Task 2 完了後]
  4. API エンドポイント追加 (1.5時間) [独立実行可能]

🟠 P3 (慎重実行):
  5. データベーススキーマ変更 (4時間) [全P1-P2完了後]

実行したいタスクを選択してください:
> 1-2        # タスク1,2を順次実行
> 3,4        # タスク3,4を並列実行
> all high   # 全高優先度タスクを実行
> auto       # 推奨タスクを自動選択
```

### 実行ログ例

```
> 1-2

✅ 実行確認:
  - Task 1: ESLintルール修正 (15分)
  - Task 2: 型定義追加 (30分, Task 1依存)

推定実行時間: 45分
影響範囲: ESLint設定、型定義ファイル
依存関係: Task 1 → Task 2 (順次実行)

実行しますか? (y/n): y

🚀 実行開始:

Task 1 実行中...
  ✅ ESLintルール修正完了 (12分)
  ✅ TodoWrite更新: Task 1 completed

Task 2 実行中...
  ✅ 型定義追加完了 (28分)
  ✅ TodoWrite更新: Task 2 completed

🎉 全タスク完了! (総時間: 40分)

次回推奨タスク:
  - Task 3: React Component実装 (依存関係解消済み)
```

## 高度な機能

### スマート実行モード

```bash
/todos auto              # AI推奨タスクを自動実行
/todos --smart           # 依存関係考慮の最適順序実行
/todos --parallel        # 並列実行可能タスクの自動検出・実行
/todos --estimate        # 実行時間・影響度の事前計算表示
```

### バッチ実行機能

```bash
/todos batch high        # 高優先度タスクの一括実行
/todos batch 1-5,8       # 指定番号の範囲実行
/todos batch quick       # 15分以内タスクの高速実行
```

## 品質チェックリスト

### 計画段階

- [ ] 全データソース統合完了
- [ ] 関連タスクグルーピング完了
- [ ] 優先度評価・実行順序決定
- [ ] 依存関係分析・並列実行機会特定

### 実行段階

- [ ] 段階的実行（P1→P2→P3→P4→P5）
- [ ] 各段階完了時の中間検証
- [ ] 依存関係遵守・ブロッカー解消
- [ ] 進捗記録・メトリクス収集

### 完了段階

- [ ] 全タスクの完了確認
- [ ] 実行結果のレビュー
- [ ] 残存タスクの次期計画組み込み
- [ ] 改善点の知見記録

## 📚 効率的タスク管理ガイド

### 🟡 実行効率向上（タスク実行時の参考）

タスク管理の効率化に関する以下のガイドは今後追加予定です：

- **開発効率向上ガイド** - TypeScript・ESLint・実践技法で効率最大化
- **包括的統合ガイド** - 複雑タスクのシナリオ別アプローチ
- **重要技術知見集** - 緊急対応・優先度判断の知見

## Todo追加フロー

### Phase 1: タスク分析（`add`サブコマンド）

1. **要件抽出**: 自然言語からタスク要件を解析
2. **影響分析**: コードベース全体への影響を予測
3. **優先度算出**: P1-P5の自動優先度決定
4. **依存関係**: 関連タスク・前提条件の特定

### Phase 2: Todo記録

1. **データソース選択**:
   - 一時的 → TodoWriteツール
   - 永続的 → `.claude/TODO.md`ファイル
2. **フォーマット統一**: 優先度・工数・依存関係を構造化
3. **重複チェック**: 既存タスクとの重複を回避

### Phase 3: 自動候補提案（`--auto`オプション）

1. **パターン学習**: 完了タスクから成功パターンを抽出
2. **類似度計算**: 90%以上の精度で類似タスクを検出
3. **ROI最適化**: 投資対効果の高い順に候補提示

## データソース統合

### 1. TodoWriteツール（セッション内）

- 現在のセッションで作成されたTodo
- リアルタイムで更新・進捗管理
- セッション終了で消失

### 2. .claude/TODO.md（永続的）

- プロジェクトごとの長期Todo管理
- マークダウン形式で人間も編集可能
- バージョン管理対象

### 3. 統合表示

- 両データソースを統合して一覧表示
- 優先度・更新日時でソート
- 重複排除・整合性チェック

## 関連コマンド

- **/fix** - 品質保証・修正実行
- **/orchestrator** - 複雑タスクの段階分割
- **/learnings** - 実行実績の記録

## 制約・注意事項

- P1から順次実行し、各段階で検証を実施
- 依存関係のあるタスクは適切な順序で実行
- 並列実行は同一優先度内でのみ実施
- 新規タスクは`/todos add`で追加（統合コマンド）
- `.claude/TODO.md`は各プロジェクトで個別管理

---

**目標**: 効率的なタスク管理によりチーム生産性を最大化
