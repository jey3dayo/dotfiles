############################
# Basic
############################
# disable-default-keybinds = false

############################
# Keyboard Protocol
############################
# Prevent CSI-u escape sequences for better compatibility
# This prevents Ghostty from sending escape sequences like ^[[5;13~
# when modifier keys are combined with standard keys
# Note: keybind-all-as-text is not supported in Ghostty 1.2.3,
# so we explicitly bind each Enter combination below

############################
# Shell Integration (Job Control)
############################
# Enable Ctrl+Z for job control (suspend/background jobs)
# Ghostty may intercept Ctrl+Z by default, preventing SIGTSTP
# Try multiple approaches to ensure the key reaches the shell

# Send raw control characters directly to ensure they reach the shell
# unbind may not work if Ghostty's default interceptor runs first
# 0x1A = Ctrl+Z (SIGTSTP / suspend)
keybind = ctrl+z=text:\x1a

# Note: Ctrl+J is Line Feed (0x0A), same as Enter in most contexts
# In Claude Code, it will submit the input (same as pressing Enter)
# 0x0A = Ctrl+J (Line Feed / newline)
keybind = ctrl+j=text:\x0a

# Ctrl+Enter: explicitly send newline (same as Ctrl+J)
# This prevents Ghostty from sending escape sequences like ^[[5;13~
keybind = ctrl+enter=text:\x0a

# Shift+Enter: also send newline for consistency
# Some apps (like Claude Code) treat this as submit
keybind = shift+enter=text:\x0a

# Alt+Enter: prevent escape sequences, send newline
keybind = alt+enter=text:\x0a

# Cmd+Enter: unbind default fullscreen toggle
keybind = cmd+enter=unbind

############################
# Font (match WezTerm)
############################
font-family = "UDEV Gothic 35NFLG"
font-family = "Inconsolata Nerd Font Mono"
font-family = "Noto Color Emoji"
font-size = 15

############################
# Theme / Window (match WezTerm)
############################
theme = "Gruvbox Dark Hard"
background-opacity = 0.94
background-opacity-cells = true
window-padding-x = 8
window-padding-y = 0
window-width = 180
window-height = 50
unfocused-split-opacity = 0.7

# macOS native titlebar control
macos-titlebar-style = tabs


############################
# Prefix: Ctrl-x (sequence style)
############################
# Ghostty の sequence 表記: ctrl+x>KEY


############################
# Tabs
############################

keybind = ctrl+x>c=new_tab
keybind = ctrl+x>n=next_tab
keybind = ctrl+x>p=previous_tab

# Tab jump 1..8
keybind = ctrl+x>1=goto_tab:1
keybind = ctrl+x>2=goto_tab:2
keybind = ctrl+x>3=goto_tab:3
keybind = ctrl+x>4=goto_tab:4
keybind = ctrl+x>5=goto_tab:5
keybind = ctrl+x>6=goto_tab:6
keybind = ctrl+x>7=goto_tab:7
keybind = ctrl+x>8=goto_tab:8


############################
# Splits (tmux like)
############################
# Ctrl-x - : split down (horizontal divider)
keybind = ctrl+x>-=new_split:down


# Ctrl-x \ : split right
keybind = ctrl+x>backslash=new_split:right
keybind = ctrl+x>¥=new_split:right
keybind = ctrl+x>|=new_split:right

# Ctrl-x o : next pane
keybind = ctrl+x>o=goto_split:next

# Ctrl-x z : zoom pane
keybind = ctrl+x>z=toggle_split_zoom

# Ctrl-x Space : equalize panes
keybind = ctrl+x>space=equalize_splits


############################
# Pane navigation (Vim style)
############################

keybind = ctrl+x>h=goto_split:left
keybind = ctrl+x>j=goto_split:down
keybind = ctrl+x>k=goto_split:up
keybind = ctrl+x>l=goto_split:right


############################
# Pane resize (prefix + HJKL)
############################
# 10 は大きめ。細かくしたいなら 5 へ。

keybind = ctrl+x>H=resize_split:left,10
keybind = ctrl+x>J=resize_split:down,10
keybind = ctrl+x>K=resize_split:up,10
keybind = ctrl+x>L=resize_split:right,10


############################
# Close (安全寄り)
############################
# ここが一番誤爆しやすいので「x=ペイン」「X=タブ」などに分けるのを推奨
# 好みで元のまま（ctrl+x>x=close_surface）でもOK

keybind = ctrl+x>x=close_surface


############################
# Search / Command palette
############################

keybind = ctrl+x>/=toggle_command_palette


############################
# Quality of life
############################

keybind = ctrl+x>r=reload_config

############################
# WezTerm-like non-prefix keys
############################

keybind = ctrl++=increase_font_size:1
keybind = ctrl+-=decrease_font_size:1
keybind = ctrl+0=reset_font_size

keybind = alt+ctrl+h=move_tab:-1
keybind = alt+ctrl+l=move_tab:1

keybind = alt+r>h=resize_split:left,32
keybind = alt+r>j=resize_split:down,32
keybind = alt+r>k=resize_split:up,32
keybind = alt+r>l=resize_split:right,32
